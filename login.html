<!DOCTYPE html>
<html lang="en">

  <head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Crow</title>

    <!-- Bootstrap core CSS -->
    <link href="vendor/bootstrap/css/bootstrap.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="css/shop-homepage.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel='stylesheet' href='https://use.fontawesome.com/releases/v5.6.3/css/all.css' integrity='sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/' crossorigin='anonymous'>

  </head>

  <body style="background-image: url('image/1.jpg'); background-repeat: no-repeat;background-color: black;">

    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
      <div class="container">
        <a class="navbar-brand" href="index.html">  <img class="img-logo" src="image/Logo.png" alt=""></a><h1 style="color:skyblue; font-family: Comic Sans MS;">CROW </h1> <br> <p><sub style="color:white;"> Stay Clean</sub></p>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarResponsive">
          <ul class="navbar-nav ml-auto">
            <li class="nav-item">
              <a class="nav-link" href="index.html">Home
                <span class="sr-only">(current)</span>
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="index.html">About Us
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="contact.html">Contact Us
              </a>
            </li>
            <li class="nav-item active">
              <a class="nav-link" id = "log" style="display:none">
                  <span class="sr-only">(current)</span>
              </a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <!-- Page Content -->
    <br>
    <br>
    <br>
    <div class="container shadow-sm" id="transparent">

      <div class="row">

        <div class="col-lg-4 col-md-6 mb-4">

          <h1>Login here</h1>

          <form>

            <div class="form-group">

              <label for="user"><b>Username : </b></label>
              <input type="text" class="form-control" id="user" placeholder="Username">

            </div>

            <div class="form-group">

               <label for="pass"><b>Password : </b></label>
               <input type="password" class="form-control" id="pass" placeholder="Password">

            </div>
            <div class="form-group" id="errormessage" style="display:none" >
                <label style="color:red"></label>
            </div>


            <button type="submit" class="btn btn-outline-primary" id="login"><i class='fas fa-sign-in-alt' style='font-size:16px'></i><b>Login</b></button>

          </form>

        </div>

        <div class="col-lg-4 col-md-6 mb-4">
        </div>

        <div class="col-lg-4 col-md-6 mb-4" id="sign">

            <h4>Or,</h4>

            <h1>Creat an account</h1>

            <form>

                <div class="form-group">

                    <label for="username"> <b>Username : </b></label>
                    <input type="text" class="form-control" id="username" placeholder="Username">
    
                  </div>

              <div class="form-group">

                <label for="firstname"> <b>Name : </b></label>
                <input type="text" class="form-control" id="firstname" placeholder="First name">

              </div>

              <div class="form-group">

                  <label for="email"> <b>Email : </b></label>
                  <input type="email" class="form-control" id="email" placeholder="example@mail.com">

              </div>

              <div class="form-group">

                  <label for="Address"><b>Address :</b></label> <br>
                  <label for="street">Street Address :</label>
                  <input type="text" class="form-control" id="street" placeholder="House no, road no">
                  <label for="state">State/Province :</label>
                  <input type="text" class="form-control" id="state" placeholder="State/Province">
                  <label for="city">City :</label>
                  <input type="text" class="form-control" id="city" placeholder="City">
                  <label for="zip">Zip/Postal Code :</label>
                  <input type="text" class="form-control" id="zip" placeholder="Zip/Postal Code">

              </div>

              <div class="form-group">

                 <label for="newpassword"><b>Password : </b></label>
                 <input type="password" class="form-control" id="newpassword" placeholder="New password">

              </div>

              <div class="form-group">

                  <label for="confirmpassword"><b>Confirm Password : </b></label>
                  <input type="password" class="form-control" id="confirmpassword" placeholder="Confirm password">

               </div>
               <div class="form-group" id="errorsign" style="display:none" >
                  <label style="color:red"></label>
              </div>

              <button type="submit" class="btn btn-outline-primary" id="Signup"><b>Signup</b></button>

            </form>
          </div>
        <!-- /.col-lg-12 -->
      </div>
    </div>

      <!-- /.row -->
    <!-- /.container -->

    <!-- Footer -->
    <footer class="py-5 bg-dark">
        <div class="container">
          <div class="row">
            <div class="col-lg-6">
              <img src="image/Logo.png" alt="Logo">
              <br>
              <p style="color:white; font-family: 'Courier New', Courier, monospace">A web based cleaning companey.</p>
            </div>
            <div class="col-lg-3">
              </div>
              <div class="col-lg-3">
                   <i class="fas fa-landmark" aria-hidden="true" style="color:white;"></i> <p style="color:white;">House-115, Rd no. 7, Block- D, Dhaka 1213</p>
                   <i class="fas fa-phone" aria-hidden="true" style="color:white;"></i> <p style="color:white;">162472</p>
                   <i class="fas fa-at" aria-hidden="true" style="color:white;"></i> <p style="color:white;">crow_stay_clean@gmail.com</p>
                </div>
          </div>        
        </div>
        <!-- /.container -->
      </footer>

    <!-- Bootstrap core JavaScript -->
    <script src="vendor/jquery/jquery.min.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

    <script>
      $(document).ready(function(){


        var user = JSON.parse(localStorage.getItem('user') );
        if( user != null ) window.location.href = 'index.html';
        
        

        $('#Signup').click(function(e){
          console.log("singup");
          e.preventDefault();
          var obj = {

            user : $("#username").val(),
            firstname : $("#firstname").val(),
            email : $("#email").val(),
            street : $("#street").val(),
            state : $("#state").val(),
            city : $("#city").val(),
            zip : $("#zip").val(),
            newpassword : $("#newpassword").val(),
            confirmpassword : $("#confirmpassword").val()

          };
          console.log(obj);
          if( (obj.newpassword == obj.confirmpassword) && obj.newpassword.length > 0 )
          {
            $.ajax({

              url : 'signup.php?phpCall='+JSON.stringify(obj),

              success : function(response)
              {
                if( response == "done" )
                {
                    alert("Successfully register.")
                    window.location.href = "index.html";
                }
              },

              error : function(a,b,c)
              {
                console.log("ajax" + b);
              },

              complete : function(){}
            });
          }
          else{
            $("#errorsign").show();
            $("#errorsign label").html("Password doesn't match");
          }
          });
        $('#login').click(function(e){
          console.log("login");
          e.preventDefault();

          var obj = {

            user : $("#user").val(),
            pass : $("#pass").val()
          };
          $.ajax({

            url : 'login.php?phpCall='+JSON.stringify(obj),

            success : function(response)
            {
                obj = JSON.parse(response);
                if( obj.id == 0 ) {
							      $("#errormessage").show();
							      $("#errormessage label").html('Invalid login approach');
						    } 
                else{
                  $("#errormessage").hide();
                  localStorage.setItem('user' , response );
                  var user = JSON.parse(localStorage.getItem('user') );
                  console.log(user);
                  window.location.href = "index.html";
                }

            },
            error : function( a , b , c )
            {
              console.log(b);
            },
            
            complete : function(){}

          });
        });
      });

    </script>

  </body>

</html>
